import json

import requests

import re
headers = {
    "Accept": "*/*",
    "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6",
    "Cache-Control": "no-cache",
    "Connection": "keep-alive",
    "Content-type": "application/x-www-form-urlencoded",
    "Cookie": "JSESSIONID=62D9ABFE6F4BE1B0F9BDC01EEA8DC794; UniqueID=tXVvDg8wtzcRYHDU1714987500016; Sites=_0; route=6956ef56584808585a187954e8100680; __root_domain_v=.ipmph.com; _qddaz=QD.117814985994423; Hm_lvt_ec31b23a3a54fb0e85df69fc93bd5de9=1715133669; Hm_lpvt_ec31b23a3a54fb0e85df69fc93bd5de9=1715133669; sensorsdata2015jssdkcross=%7B%22distinct_id%22%3A%2218f4d38f5b7190d-084705f8463bb28-4c657b58-1327104-18f4d38f5b8ab6%22%2C%22first_id%22%3A%22%22%2C%22props%22%3A%7B%22%24latest_traffic_source_type%22%3A%22%E7%A4%BE%E4%BA%A4%E7%BD%91%E7%AB%99%E6%B5%81%E9%87%8F%22%2C%22%24latest_search_keyword%22%3A%22%E6%9C%AA%E5%8F%96%E5%88%B0%E5%80%BC%22%2C%22%24latest_referrer%22%3A%22https%3A%2F%2Fopen.weixin.qq.com%2F%22%7D%2C%22identities%22%3A%22%5Cn%2F1vqr%7B%5Cu0003v%5Cu0003%5Cbln%7B%7C%7B%5Cbz%7C%5Cu0004%5Cu0002lvq%2FG%2F%3EEsAq%40EsBoD%3EF%3Dq%3A%3DEAD%3DBsEAC%40oo%3FE%3AApCBDoBE%3A%3E%40%3FD%3E%3DA%3A%3EEsAq%40EsBoEnoC%2F9%2F1vqr%7B%5Cu0003v%5Cu0003%5Cblp%7C%7Cxvrlvq%2FG%2F%3EEsBC%3Dn%3FrDFnpD%3A%3D%40%3D%3FEop%40FFDBnA%3AApCBDoBE%3A%3E%40%3FD%3E%3DA%3A%3EEsBC%3Dn%3FrDnF%3DE%2F%5Cf%22%2C%22history_login_id%22%3A%7B%22name%22%3A%22%22%2C%22value%22%3A%22%22%7D%2C%22%24device_id%22%3A%2218f4d38f5b58b4-0001e573ac901e574-4c657b58-1327104-18f4d38f5b61a1e%22%7D; _qddab=3-ml9d5r.lvxlm4ia; undefined_vq=122",
    "Origin": "https://medbooks.ipmph.com",
    "Pragma": "no-cache",
    "Referer": "https://medbooks.ipmph.com/medical/medbooks/browse/articleList.zhtml?resourceType=ReferenceBook&classType=4",
    "Sec-Fetch-Dest": "empty",
    "Sec-Fetch-Mode": "cors",
    "Sec-Fetch-Site": "same-origin",
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 Edg/124.0.0.0",
    "sec-ch-ua": "Chromium;v=124, Microsoft",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows"
}
articleId_pattern = r'articleId=(\d+)'


url = "https://medbooks.ipmph.com/medical/ajax/invoke"
def get_data(idx):
    return {
        "_ZVING_METHOD": "com.zving.framework.ui.control.DataListUI.doWork",
        "_ZVING_DATA_FORMAT": "json",
        "_ZVING_DATA": json.dumps(
            {"_ZVING_METHOD": "ResourceArticle.getArticleList", "_ZVING_SIZE": 100, "_ZVING_AUTOFILL": "true",
             "_ZVING_PAGE": True, "_ZVING_ID": "list1", "classType": "4", "resourceType": "ReferenceBook",
             "ConditionField": "1", "ConditionValue": "1",
             "_ZVING_TAGBODY": "&lt;tr&gt;&nbsp;&lt;td&nbsp;valign=&quot;top&quot;&nbsp;class=&quot;boder-bottom&quot;&gt;&nbsp;&lt;div&nbsp;style=&quot;padding:5px&nbsp;14px;overflow:hidden;zoom:1;&quot;&nbsp;class=&quot;bg_color&quot;&gt;&nbsp;&lt;table&nbsp;style=&quot;display:&nbsp;${BasicData}&quot;&gt;&nbsp;&lt;tbody&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&nbsp;width=&quot;16&quot;&nbsp;valign=&quot;top&quot;&gt;&lt;span&nbsp;class=&quot;jg_font_h21_lm2&quot;&gt;${_RowNo}.&lt;/span&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm3&quot;&nbsp;style=&quot;display:inline-block;&quot;&gt;标题：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_bt1&quot;&nbsp;style=&quot;display:inline-block;&quot;&gt;&nbsp;&lt;a&nbsp;href=&quot;basicDataContent.zhtml?articleId=${ID}&amp;resourceType=BasicData&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;color:#FF6C00;&quot;&gt;[详解]${Title}&lt;/a&gt;&nbsp;${HasPriv}&nbsp;&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;作者：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_zy&quot;&gt;${Creator}&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;来源：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_ly&quot;&gt;${BelongTitles}&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;浏览次数：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_ly&quot;&gt;${HitCount}&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;摘要：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_zy&quot;&nbsp;title='${Abstract}'&gt;${SubAbstract}&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;/tbody&gt;&nbsp;&lt;/table&gt;&nbsp;&lt;table&nbsp;style=&quot;display:&nbsp;${OtherData}&quot;&gt;&nbsp;&lt;tbody&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&nbsp;width=&quot;16px&quot;&nbsp;valign=&quot;top&quot;&gt;&lt;span&nbsp;class=&quot;jg_font_h21_lm2&quot;&gt;${_RowNo}.&lt;/span&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm3&quot;&nbsp;style=&quot;display:inline-block;&quot;&gt;标题：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_bt1&quot;&nbsp;style=&quot;display:inline-block;&quot;&gt;&nbsp;&lt;!--&nbsp;&lt;a&nbsp;href=&quot;javascript:void(0);&quot;&nbsp;onclick=&quot;seeArticle('${ID}','${ContentType}');&quot;&nbsp;style=&quot;color:#FF6C00;&quot;&gt;${ContentTypeName}${Title}&lt;/span&gt;&lt;/a&gt;&nbsp;--&gt;&nbsp;&lt;a&nbsp;href=&quot;detailContent.zhtml?articleId=${ID}&amp;resourceType=${ContentType}&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;color:#FF6C00;&quot;&gt;${ContentTypeName}${Title}&lt;/a&gt;&nbsp;${HasPriv}&nbsp;&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;作者：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_zy&quot;&gt;${Creator}&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;来源：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_ly&quot;&nbsp;title=&quot;${BelongTitles_clearTag}&quot;&gt;${SourceLink}&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;页码：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_nr&quot;&gt;&nbsp;${Pages}&nbsp;&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;出版时间：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_nr&quot;&gt;&nbsp;${PublishDate}&nbsp;&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;版本：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_nr&quot;&gt;&nbsp;${edition}&nbsp;&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;浏览次数:&lt;/span&gt;&lt;span&nbsp;class=&quot;jg_font_h21_nr&quot;&gt;${HitCount}&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;tr&gt;&nbsp;&lt;td&gt;&lt;/td&gt;&nbsp;&lt;td&gt;&nbsp;&lt;span&nbsp;class=&quot;w_span&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_lm&quot;&gt;摘要：&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;jg_font_h21_zy&quot;&nbsp;title='${Abstract}'&gt;&nbsp;${SubAbstract}&lt;/span&gt;&nbsp;&lt;/span&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;&nbsp;&lt;/tbody&gt;&nbsp;&lt;/table&gt;&nbsp;&lt;/td&gt;&nbsp;&lt;/tr&gt;",
             "_ZVING_PAGEINDEX": idx, "_ZVING_PAGETOTAL": 412}),
        "_ZVING_URL": "/medical/medbooks/browse/articleList.zhtml"
    }
# ['29340386', '29340386', '29340380', '29340380', '55588476', '55588476', '55588296', '55588422', '55479045', '55479045', '55478987', '55479028', '55479038', '55479002', '55479002', '55478987', '55478987', '55478999', '55399650', '55399650', '55398106', '55399395', '55399637', '55399629', '55399629', '55398106', '55399395', '55399611', '55399600', '55399600', '55398106', '55399395', '55399568', '55399568', '55398106', '55399395', '55399565', '55393038', '55393038', '55393019', '55393035', '55096362', '55096362', '55096002', '55096204', '55096291', '55096339', '55096353', '55096358', '55096358', '55096002', '55096204', '55096291', '55096339', '55096353', '55096330', '55096330', '55096002', '55096204', '55096291', '55096291', '55096319', '55096324', '55096324', '55096002', '55096204', '55096291', '55096291', '55096319', '55096322', '55096322', '55096002', '55096204', '55096291', '55096291', '55096319', '55094287', '55094287', '55093779', '55093954', '55094270', '55094270', '55094280', '55091763', '55091763', '55091485', '55091678', '55091695', '54968602', '54968602', '54968472', '54968584', '54968584', '54968558', '54968558', '54968472', '54968546', '54962318', '54962318', '54962293', '54422893', '54422893', '54422775', '54422833', '54422850', '54422451', '54422451', '54422384', '54422425', '54422435', '54422435', '54417937', '54417937', '54413416', '54417760', '54417874', '54417874', '54413416', '54417760', '54417865', '54417865', '54413416', '54417760', '54414860', '54414860', '54413416', '54414722', '54414791', '54414848', '54412645', '54412645', '54410746', '54412612', '54412629', '54412629', '54412635', '54412635', '54410746', '54412612', '54412629', '54412629', '54091040', '54091040', '54090992', '54090992', '53511047', '53511047', '53510722', '53510924', '53509443', '53509443', '53509416', '53509430', '53509430', '53509416', '53509394', '53509394', '53509382', '53509382', '53509382', '53509064', '53509064', '53508863', '53502175', '53502175', '53502154', '53288464', '53288464', '53288341', '53288426', '53280659', '53280659', '53280613', '53280613', '53280576', '53280576', '53280572', '53280572', '53280538', '53280538', '53280507', '53280507', '53280505', '53280505', '53280489', '53280489', '53280461', '53280461', '53280399', '53280399', '53280329', '53280329', '53280325', '53280325', '53280299', '53280299', '53280279', '53280279', '53280239', '53280239', '53280237', '53280237', '53280201', '53280201', '53280163', '53280163', '53127948', '53127948', '53127611', '53127833', '52751979', '52751979', '52751800', '52713203', '52713203', '52713165', '52711865', '52711865', '52711845', '52699706', '52699706', '52699686', '52479552', '52479552', '52479499', '52479539', '52472231', '52472231', '52472159', '52472179', '52421812', '52421812', '52421021', '52421021', '52420150', '52420756', '52420756', '52420150', '52420721', '52420721', '52164640', '52164640', '52164049', '52164605', '52164629', '52164595', '52164595', '52164049', '52164563', '52164584', '52103001', '52103001', '52102950', '52057492', '52057492', '52057266', '52057473', '52057490', '52057490', '52057266', '52057473', '52057484', '52057484', '52057266', '52057473', '52057482', '52057482', '52057482', '52057266', '52057473', '52057480', '52057480', '52057266', '52057473', '52057478', '52057478', '52057266', '52057473', '52057476', '52057476', '52057266', '52057473', '52057473', '52057473', '52057266', '52057067', '52057067', '52056782', '52056812', '52057039', '52057065', '52057065', '52056782', '52056812', '52057039', '52057063', '52057063', '52056782', '52056812', '52057039', '52057060', '52057060', '52057060', '52056782', '52056812', '52057039', '52057052', '52057052', '52056782', '52056812', '52057039', '52057044', '52057044', '52056782', '52056812', '52057039', '52057042', '52057042', '52056782', '52056812', '52057039', '52057039', '52057039', '52056782', '52056812', '51994505', '51994505', '51994400', '51994473', '51994473', '51994491', '51994491', '51994400', '51994473', '51994473', '51993498', '51993498', '51993380', '51993461', '51993461', '51993461', '51993461', '51993380', '51993423', '51993423', '51993380', '51993380', '51993058', '51993058', '51992951', '51992951', '51993036', '51993036', '51992951', '51992951', '51992951', '51992951', '51992659', '51992659', '51992566', '51992622', '51992609', '51992609', '51992566', '51992566', '51952634', '51952634', '51952598', '51952607', '51952607', '51952598', '51446657', '51446657', '51446632', '51288654', '51288654', '51288597', '51288636', '51288652', '51288652', '51288597', '51288636', '51288648', '51288648', '51288597', '51288636']
# ['51288640', '51288640', '51288597', '51288636', '51288636', '51288636', '51288597', '51288629', '51288629', '51288597', '51288597', '51288627', '51288627', '51288597', '51288597', '51288625', '51288625', '51288597', '51288597', '51288623', '51288623', '51288597', '51288597', '51288621', '51288621', '51288597', '51288597', '51288619', '51288619', '51288597', '51288597', '51288617', '51288617', '51288597', '51288597', '51288615', '51288615', '51288597', '51288597', '51288613', '51288613', '51288597', '51288597', '51288611', '51288611', '51288597', '51288597', '51288609', '51288609', '51288597', '51288597', '51288607', '51288607', '51288597', '51288597', '51288605', '51288605', '51288597', '51288597', '51288597', '51288597', '51197490', '51197490', '51197200', '51189423', '51189423', '51189344', '51189401', '51189419', '51189421', '51189421', '51189344', '51189401', '51189419', '51188629', '51188629', '51188538', '51188592', '51188617', '51188625', '51188627', '51188627', '51188538', '51188592', '51188617', '51188625', '51188625', '51188625', '51188538', '51188592', '51188617', '51188623', '51188623', '51188538', '51188592', '51188617', '51188619', '51188621', '51188621', '51188538', '51188592', '51188617', '51188619', '51188619', '51188619', '51188538', '51188592', '51188617', '51187125', '51187125', '51187106', '51187106', '51187106', '51171369', '51171369', '51171363', '51165865', '51165865', '51163184', '51165670', '51165806', '51163467', '51163467', '51163184', '51163184', '51163439', '51163462', '51163462', '51156563', '51156563', '51156437', '51156543', '51156561', '51156561', '51156437', '51156543', '51156558', '51156558', '51156558', '51156437', '51156543', '51156548', '51156548', '51156437', '51156543', '51156543', '51156546', '51156546', '51156437', '51156543', '51156543', '51156543', '51156543', '51156437', '50966034', '50966034', '50965910', '50965910', '50772039', '50772039', '50771509', '50772006', '50772006', '50771509', '50771982', '50771982', '50771509', '50771952', '50771952', '50771509', '50771912', '50771912', '50771509', '50771877', '50771877', '50771509', '50771841', '50771841', '50771509', '50771796', '50771796', '50771509', '50771763', '50771763', '50771509', '50771722', '50771722', '50771509', '50771692', '50771692', '50771509', '50771644', '50771644', '50771509', '50771589', '50771589', '50771509', '50771539', '50771539', '50771509', '50771509', '50771509', '50771495', '50771495', '50706062', '50706062', '50705847', '50705976', '50705976', '50705847', '49772581', '49772581', '49770841', '49772530', '49772557', '49772557', '49770841', '49772530', '49772546', '49772546', '49770841', '49772530', '49772530', '49772530', '49770841', '49772437', '49772437', '49770841', '49772279', '49772398', '49772398', '49770841', '49772279', '49772367', '49772367', '49770841', '49772279', '49772279', '49772279', '49770841', '49772116', '49772116', '49770841', '49772004', '49772098', '49772098', '49770841', '49772004', '49772047', '49772047', '49770841', '49772004', '49772004', '49772004', '49770841', '49771955', '49771955', '49770841', '49771778', '49771923', '49771923', '49770841', '49771778', '49771857', '49771857', '49770841', '49771778', '49771853', '49771853', '49770841', '49771778', '49771817', '49771817', '49770841', '49771778', '49771778', '49771778', '49770841', '49771723', '49771723', '49770841', '49771676', '49771721', '49771721', '49770841', '49771676', '49771704', '49771704', '49770841', '49771676', '49771700', '49771700', '49770841', '49771676', '49771676', '49771676', '49770841', '49771517', '49771517', '49770841', '49771445', '49771489', '49771489', '49770841', '49771445', '49771445', '49771445', '49770841', '49771394', '49771394', '49770841', '49771344', '49771392', '49771392', '49770841', '49771344', '49771376', '49771376', '49770841', '49771344', '49771370', '49771370', '49770841', '49771344', '49771344', '49771344', '49770841', '49771230', '49771230', '49770841', '49771179', '49771207', '49771207', '49770841', '49771179', '49771179', '49771179', '49770841', '49771133', '49771133', '49770841', '49771043', '49771088', '49771088', '49770841', '49771043', '49771060', '49771060', '49770841', '49771043', '49771043', '49771043', '49770841', '49770972', '49770972', '49770841', '49770841', '49770915', '49770915', '49770841', '49770841', '49770860', '49770860', '49770841', '49770841', '49770841', '49770841', '49770397', '49770397', '49770118', '49770392', '49770392', '49770392', '49770118', '49770383', '49770383', '49770118', '49770380']

for x in range(2):
    response = requests.post(url, headers=headers, data=get_data(x))
    ls = re.findall(articleId_pattern, response.text)
    print(ls)